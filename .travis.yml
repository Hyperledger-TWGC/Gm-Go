language: go
dist: bionic
go:
  - "1.14"
  - master
install:
  - cd $HOME; git clone https://github.com/guanzhi/GmSSL.git; cd GmSSL
  - ./config
  - make
  - sudo make install
  - ln -s /usr/local/lib/libssl.so.1.1 /usr/lib/libssl.so.1.1
  - ln -s /usr/local/lib/libcrypto.so.1.1 /usr/lib/libcrypto.so.1.1
  - cd $TRAVIS_BUILD_DIR
  - cd gmssl; go build; cd -
script:
  - cd test; go test;
